<div align="center">

![Laravel Enum Translatable](.github/logo.svg)

[![Latest Version on Packagist](https://img.shields.io/packagist/v/osama-98/laravel-enum-translatable.svg?style=flat-square)](https://packagist.org/packages/osama-98/laravel-enum-translatable)
[![Total Downloads](https://img.shields.io/packagist/dt/osama-98/laravel-enum-translatable.svg)](https://packagist.org/packages/osama-98/laravel-enum-translatable)
[![License](https://img.shields.io/packagist/l/osama-98/laravel-enum-translatable.svg?style=flat-square)](https://packagist.org/packages/osama-98/laravel-enum-translatable)

A Laravel package that adds translation, array conversion, and comparison helpers to PHP 8.1+ backed enums via traits.

</div>

## Articles

- [Medium](https://masteryoflaravel.medium.com/stop-hardcoding-translations-the-revolutionary-way-to-build-multilingual-laravel-apps-with-bf303533b8b0)
- [Laravel News](https://laravel-news.com/translatable-enums)

---

## Installation

```bash
composer require osama-98/laravel-enum-translatable
```

---

## Configuration

Publish the config file:

```bash
php artisan vendor:publish --tag="laravel-enums-config"
```

This creates `config/laravel-enums.php`:

```php
return [
    'supported_locales' => [
        'en',
        // 'ar',
        // 'es',
    ],

    // Enable modular support (e.g. nWidart/laravel-modules)
    'modular_enabled' => false,

    // Resolver class for module translation namespaces
    'namespace_resolver' => \Osama\LaravelEnums\TranslationNamespaceResolver::class,
];
```

---

## Traits

The package provides three composable traits. Each builds on the one below it:

| Trait | Includes | What it adds |
|---|---|---|
| `EnumTranslatable` | `EnumArrayable` | Translation methods |
| `EnumArrayable` | `EnumWrappable` | Array, filtering, and pattern methods |
| `EnumWrappable` | — | Wrapping and comparison methods |

---

## Generating an Enum

Use the `make:enum` artisan command to scaffold a new enum:

```bash
php artisan make:enum CourseStatus
```

This generates `app/Enums/CourseStatusEnum.php` with `EnumTranslatable` by default:

```php
<?php

declare(strict_types=1);

namespace App\Enums;

use Osama\LaravelEnums\Concerns\EnumTranslatable;

enum CourseStatusEnum: string
{
    use EnumTranslatable;
}
```

### Command Options

| Option | Description |
|---|---|
| `--int` | Generate an integer backed enum |
| `--arrayable` | Use `EnumArrayable` instead of `EnumTranslatable` |
| `--wrappable` | Use `EnumWrappable` instead of `EnumTranslatable` |

> `EnumArrayable` already includes `EnumWrappable` internally, so `--arrayable` takes precedence over `--wrappable` when both are passed.

You can also generate enums in nested namespaces:

```bash
php artisan make:enum Admin/UserStatus
# → app/Enums/Admin/UserStatusEnum.php (namespace App\Enums\Admin)
```

> The `Enum` suffix is appended automatically if omitted.

---

## Usage

All examples below use this enum:

```php
<?php

namespace App\Enums;

use Osama\LaravelEnums\Concerns\EnumTranslatable;

enum CourseStatusEnum: string
{
    use EnumTranslatable;

    case DRAFT = 'draft';
    case PENDING = 'pending';
    case PUBLISHED = 'published';
}
```

### Translation Files

The translation key is derived from the class name: strip `Enum`, convert to `snake_case`, pluralize, and nest under `enums`.

`CourseStatusEnum` → `enums.course_statuses`

**lang/en/enums.php**
```php
return [
    'course_statuses' => [
        'draft'     => 'Draft',
        'pending'   => 'Pending',
        'published' => 'Published',
    ],
];
```

**lang/ar/enums.php**
```php
return [
    'course_statuses' => [
        'draft'     => 'مسودة',
        'pending'   => 'قيد المراجعة',
        'published' => 'منشور',
    ],
];
```

---

### EnumTranslatable

#### `trans(?string $locale)`

Get the translated label for the current case. Falls back to the raw value if no translation is found.

```php
$status = CourseStatusEnum::DRAFT;

$status->trans();       // 'Draft'  (current locale)
$status->trans('ar');   // 'مسودة'
$status->trans('en');   // 'Draft'
```

#### `allTrans()`

Get translations for all configured locales.

```php
CourseStatusEnum::DRAFT->allTrans();
// ['en' => 'Draft', 'ar' => 'مسودة']
```

#### `transKey()`

Get the full translation key for the current case.

```php
CourseStatusEnum::DRAFT->transKey(); // 'enums.course_statuses.draft'
```

#### `getTransKey()`

Get the translation key for the enum class (without a specific case).

```php
CourseStatusEnum::getTransKey(); // 'enums.course_statuses'
```

#### `toArrayTrans()`

Get all cases as an array of `['value', 'name']` pairs using the current locale.

```php
CourseStatusEnum::toArrayTrans();
// [
//     ['value' => 'draft',     'name' => 'Draft'],
//     ['value' => 'pending',   'name' => 'Pending'],
//     ['value' => 'published', 'name' => 'Published'],
// ]
```

Useful for populating dropdowns in API responses:

```php
public function options(): JsonResponse
{
    return response()->json(CourseStatusEnum::toArrayTrans());
}
```

#### `object()`

Get the current case as a `['value', 'name']` pair using the current locale.

```php
CourseStatusEnum::DRAFT->object();
// ['value' => 'draft', 'name' => 'Draft']
```

Useful in API resources:

```php
public function toArray($request): array
{
    return [
        'id'     => $this->id,
        'status' => $this->status->object(),
        // ['value' => 'draft', 'name' => 'Draft']
    ];
}
```

---

### EnumArrayable

#### `names()` / `values()` / `toArray()`

```php
CourseStatusEnum::names();   // ['DRAFT', 'PENDING', 'PUBLISHED']
CourseStatusEnum::values();  // ['draft', 'pending', 'published']
CourseStatusEnum::toArray(); // ['draft' => 'DRAFT', 'pending' => 'PENDING', ...]
```

#### `randomCase()` / `randomValue()`

```php
CourseStatusEnum::randomCase();  // e.g. CourseStatusEnum::DRAFT
CourseStatusEnum::randomValue(); // e.g. 'draft'
```

Both accept an `$except` parameter to exclude specific values:

```php
CourseStatusEnum::randomCase(CourseStatusEnum::DRAFT);
CourseStatusEnum::randomValue(['draft', 'pending']);
```

#### `only()` / `except()`

```php
CourseStatusEnum::only(['draft', 'pending']);
// [CourseStatusEnum::DRAFT, CourseStatusEnum::PENDING]

CourseStatusEnum::except([CourseStatusEnum::PUBLISHED]);
// [CourseStatusEnum::DRAFT, CourseStatusEnum::PENDING]
```

#### `matching()` / `notMatching()`

Filter cases using a wildcard pattern (`*`). Matching is case-insensitive.

```php
CourseStatusEnum::matching('*ed');     // PENDING, PUBLISHED
CourseStatusEnum::notMatching('*ed'); // DRAFT
```

Convenience shortcuts:

```php
CourseStatusEnum::startsWith('p');   // PENDING, PUBLISHED
CourseStatusEnum::endsWith('ed');    // PENDING, PUBLISHED
CourseStatusEnum::contains('ish');   // PUBLISHED
```

---

### EnumWrappable

#### `wrap()`

Safely cast a string or existing enum instance to an enum. Returns `null` for empty values.

```php
CourseStatusEnum::wrap('draft');                  // CourseStatusEnum::DRAFT
CourseStatusEnum::wrap(CourseStatusEnum::DRAFT);  // CourseStatusEnum::DRAFT
CourseStatusEnum::wrap(null);                     // null
CourseStatusEnum::wrap('invalid', strict: false); // null (tryFrom)
```

#### `is()` / `isNot()`

```php
$status = CourseStatusEnum::DRAFT;

$status->is('draft');                       // true
$status->is(CourseStatusEnum::DRAFT);       // true
$status->isNot(CourseStatusEnum::PUBLISHED); // true
```

#### `isAny()` / `isNotAny()`

```php
$status->isAny(['draft', 'pending']);                               // true
$status->isAny([CourseStatusEnum::PUBLISHED]);                      // false
$status->isNotAny([CourseStatusEnum::PENDING, CourseStatusEnum::PUBLISHED]); // true
```

---

### Using Enums in Models

```php
protected function casts(): array
{
    return [
        'status' => CourseStatusEnum::class,
    ];
}
```

---

## Testing

```bash
composer test
```

---

## Changelog

Please see [CHANGELOG](CHANGELOG.md) for recent changes.

## Credits

- [Osama Sadah](https://github.com/osama-98)
- [All Contributors](../../contributors)

## License

The MIT License (MIT). Please see [License File](LICENSE.md) for more information.
